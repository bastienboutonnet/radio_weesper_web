<script src="/js/live-marquee.js"></script>
<!-- Live banner -->
{{ $online := .Site.Params.radio_online }} {{ if not .IsHome }}
<a href="/" style="text-decoration: none; color: inherit">
  {{ end }}
  <section class="live-banner">
    <div class="container">
      <div class="live-banner-pill-inverted">
        <div class="flex-center">
          {{ if $online }}
          <span class="live-now-label">LIVE NOW</span>
          <span class="circle-indicator"></span>
          <div class="live-banner-marquee">
            {{ with index (first 1 (where .Site.RegularPages "Section" "post")) 0 }}
            {{ $hasResident := isset .Params "is_resident" }}
            {{ $isResident := cond $hasResident .Params.is_resident true }}
            {{ $artists := .Params.artists }}
            {{ if not $artists }}{{ $artists = slice (or .Params.show_name .Title) }}{{ end }}
            {{ $artistsStr := partial "format-artists.html" (dict "artists" $artists) }}
            {{ $showName := .Params.show_name }}
            {{ $title := (or $showName .Title) }}
            {{ $displayTitle := cond (and (not $isResident) (not $showName)) $artistsStr $title }}
            {{ $sep := (or .Site.Params.separator "â€”") }}
            <span class="marquee-span" id="live-marquee-title">
              {{ $displayTitle }} {{ $sep }} {{ if $isResident }}with {{ $artistsStr }}{{ else }}Guestmix{{ end }}
            </span>
            {{ else }}
            <span class="marquee-span-static">
              No show yet. Add a post in <code>content/post/</code>.
            </span>
            {{ end }}
          </div>
          {{ else }}
          <span class="live-now-label offline">OFFLINE</span>
          <span class="square-indicator offline"></span>
          <div class="live-banner-marquee">
            <span class="marquee-span" id="live-marquee-title-offline">
              We're currently offline. Treat yourself to a show from the archives in the meantime. ðŸ«§
            </span>
          </div>
          {{ end }}
        </div>
        {{ with .Params.tags }}
        <div class="post-tags">
          {{ range . }}<span class="post-tag">{{ . }}</span>{{ end }}
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ if not .IsHome }}
</a>
{{ end }}
